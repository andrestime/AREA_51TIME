const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/build-user-code-DoR-Q9-A.js","assets/get-html-D9pLuxCy.js","assets/validate-react-BDoP0unB.js","assets/transpile-CUxYTNia.js","assets/parse-transpile-error-BhWCFXvx.js"])))=>i.map(i=>d[i]);
var $n=Object.defineProperty;var je=t=>{throw TypeError(t)};var kn=(t,e,n)=>e in t?$n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var A=(t,e,n)=>kn(t,typeof e!="symbol"?e+"":e,n),Ee=(t,e,n)=>e.has(t)||je("Cannot "+n);var a=(t,e,n)=>(Ee(t,e,"read from private field"),n?n.call(t):e.get(t)),v=(t,e,n)=>e.has(t)?je("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),O=(t,e,n,r)=>(Ee(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),m=(t,e,n)=>(Ee(t,e,"access private method"),n);var fe=(t,e,n,r)=>({set _(s){O(t,e,s,n)},get _(){return a(t,e,r)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Hn="modulepreload",Xn=function(t){return"/"+t},Ue={},zt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Xn(c),c in Ue)return;Ue[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Hn,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((g,T)=>{f.addEventListener("load",g),f.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},$e=["cdn.tailwindcss.com","cdn.jsdelivr.net","unpkg.com","*.oaiusercontent.com","threejs.org"],Vn=new Set(["https:","http:","wss:"]);function ke(t,e=!1){const n=new Set;for(let r of t){if(!r)continue;let s=r.trim();/^(?:https?|wss?):/i.test(s)||(s=`https://${s}`);let o=null;try{o=new URL(s)}catch{if(!e)continue}if(!e&&(!o||!Vn.has(o.protocol))||o!=null&&o.username||o!=null&&o.password)continue;const i=e?r:o==null?void 0:o.origin;!i||!/^[^\s;,"']+$/.test(i)||n.add(i)}return Array.from(n)}const He=t=>t.filter(Boolean).map(e=>e.startsWith("http")?e:`https://${e}`).join(" ");function qn({resourceDomains:t,connectDomains:e=[],isTrusted:n}){const r=He($e.concat(ke(t,n))),s=He($e.concat(ke(e,n)));return`<meta http-equiv="Content-Security-Policy" content="${["default-src 'self'",`script-src 'self' 'wasm-unsafe-eval' 'unsafe-inline' 'unsafe-eval' blob: ${r}`,"worker-src 'self' blob:",`style-src 'self' 'unsafe-inline' ${r}`,`style-src-elem 'self' 'unsafe-inline' ${r}`,"style-src-attr 'unsafe-inline'",`img-src 'self' data: ${r}`,`font-src 'self' ${r}`,`connect-src 'self' ${s}`,`media-src 'self' data: ${r}`,"object-src 'none'","frame-src 'none'","base-uri 'self'","upgrade-insecure-requests"].filter(Boolean).join("; ")}">`}let Xe=null,Jt=null;function Ve(t){if(!(t!=null&&t.length))return[];if(t.some(n=>n.trim().toLowerCase()==="'none'"))return[];if(t.some(n=>n.trim()==="*"))return["*"];const e=new Set;for(const n of t){const r=n.trim().toLowerCase();r&&e.add(r)}return Array.from(e.values())}function qe(t,e){const n=Ve(t),r=Ve(e),s=n.includes("*"),o=r.includes("*");if(s&&!o)return"more";if(!s&&o)return"less";if(s&&o)return"equal";const i=new Set(n),l=new Set(r),c=(f,g)=>{for(const T of f)if(!g.has(T))return!1;return!0},u=c(l,i),h=c(i,l);return u&&h?"equal":u&&l.size<i.size?"more":"less"}function Yn(t,e){if(!t)return"more";let n=!1;const r=qe(t.resourceDomains,e.resourceDomains);if(r==="less")return"less";r==="more"&&(n=!0);const s=qe(t.connectDomains,e.connectDomains);return s==="less"?"less":(s==="more"&&(n=!0),n?"more":"equal")}function Zn(t){if(typeof t!="string")return t;const e=document.createElement("div");e.innerHTML=t.trim();const n=e.querySelector('meta[http-equiv="Content-Security-Policy"]');if(!n)throw new Error("buildMetaTag() did not produce a CSP <meta> tag");return n}function Kn(t){if(!t)return;const e=Yn(Xe,t);if(e==="less")throw new Error("CSP is being loosened");if(e==="equal")return;const n=qn(t),r=Zn(n);if(Jt!=null&&Jt.isConnected)Jt.replaceWith(r);else{const s=document.head.querySelector('meta[http-equiv="Content-Security-Policy"]');s?s.replaceWith(r):document.head.appendChild(r)}Jt=r,Xe=t}var pt=(t=>(t.LOG="log",t.RUN_START="run_start",t.ENVIRONMENT_STATUS="environment_status",t.OUTPUT="output",t.ERROR="error",t.RUN_COMPLETE="run_complete",t))(pt||{}),gn=(t=>(t[t.INITIALIZING=0]="INITIALIZING",t[t.INSTALLING_PACKAGES=1]="INSTALLING_PACKAGES",t[t.RUNNING_CODE=2]="RUNNING_CODE",t))(gn||{});const Jn=new Set(["sendInstrument","notifySecurityPolicyViolation","notifyEnvironmentError","notifyIntrinsicHeight","notifyBackgroundColor","notifyNavigation","notifyEscapeKey","drawBoundingBoxes","getDownloadURL","openPromptInput","updateWidgetState"]),Ye="webplus:set_globals";class Qn extends CustomEvent{constructor(n){super(Ye,{detail:{globals:n}});A(this,"type",Ye)}}const Ze="openai:set_globals";class tr extends CustomEvent{constructor(n){super(Ze,{detail:{globals:n}});A(this,"type",Ze)}}const yn="root",et=()=>document.getElementById(yn),er=()=>{const t=et();t==null||t.remove()},nr=t=>{const e=document.createElement("iframe");return e.id=yn,t!=null&&t.length&&e.setAttribute("allow",rr(t)),document.body.appendChild(e),e},rr=t=>t.concat().sort().map(e=>`${e} *`).join("; "),sr=/^rgba\(\s*(\d+),\s*(\d+),\s*(\d+),\s*([\d.]+)\s*\)$/,or=t=>{const e=t.match(sr);return e?parseFloat(e[4])===0:!1},ir=t=>{const e=(t==null?void 0:t.getElementById("root"))??(t==null?void 0:t.documentElement);if(!e)return null;const r=(s=>{const o=[s];for(;o.length>0;){const i=o.shift();if(!i)return null;const{backgroundColor:l}=getComputedStyle(i);if(!or(l))return l;for(let c of i.children)o.push(c)}return null})(e);return r||null},Qt=t=>{if(!t)return null;const e=t.scrollHeight??0,{height:n}=t.getBoundingClientRect(),r=Math.max(e,n);return Number.isFinite(r)&&r>0?r:null},ar=t=>{var s,o;const e=Array.from(t.children).filter(i=>{const l=i.tagName;return l!=="SCRIPT"&&l!=="STYLE"});if(!e.length)return null;if(e.length===1)return Qt(e[0]);const n=(s=t.getBoundingClientRect)==null?void 0:s.call(t);let r=0;for(const i of e){const l=(o=i.getBoundingClientRect)==null?void 0:o.call(i);if(!l)continue;const c=n?n.top:0,u=l.bottom-c;r=Math.max(r,u)}return r>0?r:null},cr=t=>{if(!t)return null;const e=Qt(t.getElementById("root"));if(e)return e;const n=t.body;if(n){const r=ar(n);if(r)return r;const s=Qt(n);if(s)return s}return Qt(t.documentElement)??Qt(t.scrollingElement)},Ut=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,mn=new Set,Re=typeof process=="object"&&process?process:{},bn=(t,e,n,r)=>{typeof Re.emitWarning=="function"?Re.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let be=globalThis.AbortController,Ke=globalThis.AbortSignal;var fn;if(typeof be>"u"){Ke=class{constructor(){A(this,"onabort");A(this,"_onabort",[]);A(this,"reason");A(this,"aborted",!1)}addEventListener(r,s){this._onabort.push(s)}},be=class{constructor(){A(this,"signal",new Ke);e()}abort(r){var s,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const i of this.signal._onabort)i(r);(o=(s=this.signal).onabort)==null||o.call(s,r)}}};let t=((fn=Re.env)==null?void 0:fn.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,bn("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const lr=t=>!mn.has(t),At=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),wn=t=>At(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?pe:null:null;class pe extends Array{constructor(e){super(e),this.fill(0)}}var Xt;const Dt=class Dt{constructor(e,n){A(this,"heap");A(this,"length");if(!a(Dt,Xt))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=wn(e);if(!n)return[];O(Dt,Xt,!0);const r=new Dt(e,n);return O(Dt,Xt,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Xt=new WeakMap,v(Dt,Xt,!1);let Ce=Dt;var dn,pn,rt,Z,st,Nt,ot,Vt,qt,$,it,j,F,R,q,K,V,H,at,X,ct,lt,J,ut,vt,Y,Yt,p,ve,Bt,Et,ie,Q,En,Gt,Zt,ae,Rt,Ct,Ie,ge,ye,z,Pe,te,Lt,Me;const Ge=class Ge{constructor(e){v(this,p);v(this,rt);v(this,Z);v(this,st);v(this,Nt);v(this,ot);v(this,Vt);v(this,qt);A(this,"ttl");A(this,"ttlResolution");A(this,"ttlAutopurge");A(this,"updateAgeOnGet");A(this,"updateAgeOnHas");A(this,"allowStale");A(this,"noDisposeOnSet");A(this,"noUpdateTTL");A(this,"maxEntrySize");A(this,"sizeCalculation");A(this,"noDeleteOnFetchRejection");A(this,"noDeleteOnStaleGet");A(this,"allowStaleOnFetchAbort");A(this,"allowStaleOnFetchRejection");A(this,"ignoreFetchAbort");v(this,$);v(this,it);v(this,j);v(this,F);v(this,R);v(this,q);v(this,K);v(this,V);v(this,H);v(this,at);v(this,X);v(this,ct);v(this,lt);v(this,J);v(this,ut);v(this,vt);v(this,Y);v(this,Yt);v(this,Bt,()=>{});v(this,Et,()=>{});v(this,ie,()=>{});v(this,Q,()=>!1);v(this,Gt,e=>{});v(this,Zt,(e,n,r)=>{});v(this,ae,(e,n,r,s)=>{if(r||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});A(this,dn,"LRUCache");const{max:n=0,ttl:r,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:i,updateAgeOnHas:l,allowStale:c,dispose:u,onInsert:h,disposeAfter:f,noDisposeOnSet:g,noUpdateTTL:T,maxSize:b=0,maxEntrySize:w=0,sizeCalculation:y,fetchMethod:_,memoMethod:L,noDeleteOnFetchRejection:d,noDeleteOnStaleGet:E,allowStaleOnFetchRejection:P,allowStaleOnFetchAbort:x,ignoreFetchAbort:S}=e;if(n!==0&&!At(n))throw new TypeError("max option must be a nonnegative integer");const C=n?wn(n):Array;if(!C)throw new Error("invalid max value: "+n);if(O(this,rt,n),O(this,Z,b),this.maxEntrySize=w||a(this,Z),this.sizeCalculation=y,this.sizeCalculation){if(!a(this,Z)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(L!==void 0&&typeof L!="function")throw new TypeError("memoMethod must be a function if defined");if(O(this,qt,L),_!==void 0&&typeof _!="function")throw new TypeError("fetchMethod must be a function if specified");if(O(this,Vt,_),O(this,vt,!!_),O(this,j,new Map),O(this,F,new Array(n).fill(void 0)),O(this,R,new Array(n).fill(void 0)),O(this,q,new C(n)),O(this,K,new C(n)),O(this,V,0),O(this,H,0),O(this,at,Ce.create(n)),O(this,$,0),O(this,it,0),typeof u=="function"&&O(this,st,u),typeof h=="function"&&O(this,Nt,h),typeof f=="function"?(O(this,ot,f),O(this,X,[])):(O(this,ot,void 0),O(this,X,void 0)),O(this,ut,!!a(this,st)),O(this,Yt,!!a(this,Nt)),O(this,Y,!!a(this,ot)),this.noDisposeOnSet=!!g,this.noUpdateTTL=!!T,this.noDeleteOnFetchRejection=!!d,this.allowStaleOnFetchRejection=!!P,this.allowStaleOnFetchAbort=!!x,this.ignoreFetchAbort=!!S,this.maxEntrySize!==0){if(a(this,Z)!==0&&!At(a(this,Z)))throw new TypeError("maxSize must be a positive integer if specified");if(!At(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");m(this,p,En).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!i,this.updateAgeOnHas=!!l,this.ttlResolution=At(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!At(this.ttl))throw new TypeError("ttl must be a positive integer if specified");m(this,p,ve).call(this)}if(a(this,rt)===0&&this.ttl===0&&a(this,Z)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!a(this,rt)&&!a(this,Z)){const I="LRU_CACHE_UNBOUNDED";lr(I)&&(mn.add(I),bn("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",I,Ge))}}static unsafeExposeInternals(e){return{starts:a(e,lt),ttls:a(e,J),sizes:a(e,ct),keyMap:a(e,j),keyList:a(e,F),valList:a(e,R),next:a(e,q),prev:a(e,K),get head(){return a(e,V)},get tail(){return a(e,H)},free:a(e,at),isBackgroundFetch:n=>{var r;return m(r=e,p,z).call(r,n)},backgroundFetch:(n,r,s,o)=>{var i;return m(i=e,p,ye).call(i,n,r,s,o)},moveToTail:n=>{var r;return m(r=e,p,te).call(r,n)},indexes:n=>{var r;return m(r=e,p,Rt).call(r,n)},rindexes:n=>{var r;return m(r=e,p,Ct).call(r,n)},isStale:n=>{var r;return a(r=e,Q).call(r,n)}}}get max(){return a(this,rt)}get maxSize(){return a(this,Z)}get calculatedSize(){return a(this,it)}get size(){return a(this,$)}get fetchMethod(){return a(this,Vt)}get memoMethod(){return a(this,qt)}get dispose(){return a(this,st)}get onInsert(){return a(this,Nt)}get disposeAfter(){return a(this,ot)}getRemainingTTL(e){return a(this,j).has(e)?1/0:0}*entries(){for(const e of m(this,p,Rt).call(this))a(this,R)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield[a(this,F)[e],a(this,R)[e]])}*rentries(){for(const e of m(this,p,Ct).call(this))a(this,R)[e]!==void 0&&a(this,F)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield[a(this,F)[e],a(this,R)[e]])}*keys(){for(const e of m(this,p,Rt).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield n)}}*rkeys(){for(const e of m(this,p,Ct).call(this)){const n=a(this,F)[e];n!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield n)}}*values(){for(const e of m(this,p,Rt).call(this))a(this,R)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield a(this,R)[e])}*rvalues(){for(const e of m(this,p,Ct).call(this))a(this,R)[e]!==void 0&&!m(this,p,z).call(this,a(this,R)[e])&&(yield a(this,R)[e])}[(pn=Symbol.iterator,dn=Symbol.toStringTag,pn)](){return this.entries()}find(e,n={}){for(const r of m(this,p,Rt).call(this)){const s=a(this,R)[r],o=m(this,p,z).call(this,s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,a(this,F)[r],this))return this.get(a(this,F)[r],n)}}forEach(e,n=this){for(const r of m(this,p,Rt).call(this)){const s=a(this,R)[r],o=m(this,p,z).call(this,s)?s.__staleWhileFetching:s;o!==void 0&&e.call(n,o,a(this,F)[r],this)}}rforEach(e,n=this){for(const r of m(this,p,Ct).call(this)){const s=a(this,R)[r],o=m(this,p,z).call(this,s)?s.__staleWhileFetching:s;o!==void 0&&e.call(n,o,a(this,F)[r],this)}}purgeStale(){let e=!1;for(const n of m(this,p,Ct).call(this,{allowStale:!0}))a(this,Q).call(this,n)&&(m(this,p,Lt).call(this,a(this,F)[n],"expire"),e=!0);return e}info(e){const n=a(this,j).get(e);if(n===void 0)return;const r=a(this,R)[n],s=m(this,p,z).call(this,r)?r.__staleWhileFetching:r;if(s===void 0)return;const o={value:s};if(a(this,J)&&a(this,lt)){const i=a(this,J)[n],l=a(this,lt)[n];if(i&&l){const c=i-(Ut.now()-l);o.ttl=c,o.start=Date.now()}}return a(this,ct)&&(o.size=a(this,ct)[n]),o}dump(){const e=[];for(const n of m(this,p,Rt).call(this,{allowStale:!0})){const r=a(this,F)[n],s=a(this,R)[n],o=m(this,p,z).call(this,s)?s.__staleWhileFetching:s;if(o===void 0||r===void 0)continue;const i={value:o};if(a(this,J)&&a(this,lt)){i.ttl=a(this,J)[n];const l=Ut.now()-a(this,lt)[n];i.start=Math.floor(Date.now()-l)}a(this,ct)&&(i.size=a(this,ct)[n]),e.unshift([r,i])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const s=Date.now()-r.start;r.start=Ut.now()-s}this.set(n,r.value,r)}}set(e,n,r={}){var g,T,b,w,y,_,L;if(n===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:i=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:c}=r;let{noUpdateTTL:u=this.noUpdateTTL}=r;const h=a(this,ae).call(this,e,n,r.size||0,l);if(this.maxEntrySize&&h>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),m(this,p,Lt).call(this,e,"set"),this;let f=a(this,$)===0?void 0:a(this,j).get(e);if(f===void 0)f=a(this,$)===0?a(this,H):a(this,at).length!==0?a(this,at).pop():a(this,$)===a(this,rt)?m(this,p,ge).call(this,!1):a(this,$),a(this,F)[f]=e,a(this,R)[f]=n,a(this,j).set(e,f),a(this,q)[a(this,H)]=f,a(this,K)[f]=a(this,H),O(this,H,f),fe(this,$)._++,a(this,Zt).call(this,f,h,c),c&&(c.set="add"),u=!1,a(this,Yt)&&((g=a(this,Nt))==null||g.call(this,n,e,"add"));else{m(this,p,te).call(this,f);const d=a(this,R)[f];if(n!==d){if(a(this,vt)&&m(this,p,z).call(this,d)){d.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:E}=d;E!==void 0&&!i&&(a(this,ut)&&((T=a(this,st))==null||T.call(this,E,e,"set")),a(this,Y)&&((b=a(this,X))==null||b.push([E,e,"set"])))}else i||(a(this,ut)&&((w=a(this,st))==null||w.call(this,d,e,"set")),a(this,Y)&&((y=a(this,X))==null||y.push([d,e,"set"])));if(a(this,Gt).call(this,f),a(this,Zt).call(this,f,h,c),a(this,R)[f]=n,c){c.set="replace";const E=d&&m(this,p,z).call(this,d)?d.__staleWhileFetching:d;E!==void 0&&(c.oldValue=E)}}else c&&(c.set="update");a(this,Yt)&&((_=this.onInsert)==null||_.call(this,n,e,n===d?"update":"replace"))}if(s!==0&&!a(this,J)&&m(this,p,ve).call(this),a(this,J)&&(u||a(this,ie).call(this,f,s,o),c&&a(this,Et).call(this,c,f)),!i&&a(this,Y)&&a(this,X)){const d=a(this,X);let E;for(;E=d==null?void 0:d.shift();)(L=a(this,ot))==null||L.call(this,...E)}return this}pop(){var e;try{for(;a(this,$);){const n=a(this,R)[a(this,V)];if(m(this,p,ge).call(this,!0),m(this,p,z).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(a(this,Y)&&a(this,X)){const n=a(this,X);let r;for(;r=n==null?void 0:n.shift();)(e=a(this,ot))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:s}=n,o=a(this,j).get(e);if(o!==void 0){const i=a(this,R)[o];if(m(this,p,z).call(this,i)&&i.__staleWhileFetching===void 0)return!1;if(a(this,Q).call(this,o))s&&(s.has="stale",a(this,Et).call(this,s,o));else return r&&a(this,Bt).call(this,o),s&&(s.has="hit",a(this,Et).call(this,s,o)),!0}else s&&(s.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,s=a(this,j).get(e);if(s===void 0||!r&&a(this,Q).call(this,s))return;const o=a(this,R)[s];return m(this,p,z).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:c=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:T=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:w,forceRefresh:y=!1,status:_,signal:L}=n;if(!a(this,vt))return _&&(_.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:_});const d={allowStale:r,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:i,noDisposeOnSet:l,size:c,sizeCalculation:u,noUpdateTTL:h,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:T,status:_,signal:L};let E=a(this,j).get(e);if(E===void 0){_&&(_.fetch="miss");const P=m(this,p,ye).call(this,e,E,d,w);return P.__returned=P}else{const P=a(this,R)[E];if(m(this,p,z).call(this,P)){const G=r&&P.__staleWhileFetching!==void 0;return _&&(_.fetch="inflight",G&&(_.returnedStale=!0)),G?P.__staleWhileFetching:P.__returned=P}const x=a(this,Q).call(this,E);if(!y&&!x)return _&&(_.fetch="hit"),m(this,p,te).call(this,E),s&&a(this,Bt).call(this,E),_&&a(this,Et).call(this,_,E),P;const S=m(this,p,ye).call(this,e,E,d,w),I=S.__staleWhileFetching!==void 0&&r;return _&&(_.fetch=x?"stale":"refresh",I&&x&&(_.returnedStale=!0)),I?S.__staleWhileFetching:S.__returned=S}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=a(this,qt);if(!r)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...i}=n,l=this.get(e,i);if(!o&&l!==void 0)return l;const c=r(e,l,{options:i,context:s});return this.set(e,c,i),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:i}=n,l=a(this,j).get(e);if(l!==void 0){const c=a(this,R)[l],u=m(this,p,z).call(this,c);return i&&a(this,Et).call(this,i,l),a(this,Q).call(this,l)?(i&&(i.get="stale"),u?(i&&r&&c.__staleWhileFetching!==void 0&&(i.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||m(this,p,Lt).call(this,e,"expire"),i&&r&&(i.returnedStale=!0),r?c:void 0)):(i&&(i.get="hit"),u?c.__staleWhileFetching:(m(this,p,te).call(this,l),s&&a(this,Bt).call(this,l),c))}else i&&(i.get="miss")}delete(e){return m(this,p,Lt).call(this,e,"delete")}clear(){return m(this,p,Me).call(this,"delete")}};rt=new WeakMap,Z=new WeakMap,st=new WeakMap,Nt=new WeakMap,ot=new WeakMap,Vt=new WeakMap,qt=new WeakMap,$=new WeakMap,it=new WeakMap,j=new WeakMap,F=new WeakMap,R=new WeakMap,q=new WeakMap,K=new WeakMap,V=new WeakMap,H=new WeakMap,at=new WeakMap,X=new WeakMap,ct=new WeakMap,lt=new WeakMap,J=new WeakMap,ut=new WeakMap,vt=new WeakMap,Y=new WeakMap,Yt=new WeakMap,p=new WeakSet,ve=function(){const e=new pe(a(this,rt)),n=new pe(a(this,rt));O(this,J,e),O(this,lt,n),O(this,ie,(o,i,l=Ut.now())=>{if(n[o]=i!==0?l:0,e[o]=i,i!==0&&this.ttlAutopurge){const c=setTimeout(()=>{a(this,Q).call(this,o)&&m(this,p,Lt).call(this,a(this,F)[o],"expire")},i+1);c.unref&&c.unref()}}),O(this,Bt,o=>{n[o]=e[o]!==0?Ut.now():0}),O(this,Et,(o,i)=>{if(e[i]){const l=e[i],c=n[i];if(!l||!c)return;o.ttl=l,o.start=c,o.now=r||s();const u=o.now-c;o.remainingTTL=l-u}});let r=0;const s=()=>{const o=Ut.now();if(this.ttlResolution>0){r=o;const i=setTimeout(()=>r=0,this.ttlResolution);i.unref&&i.unref()}return o};this.getRemainingTTL=o=>{const i=a(this,j).get(o);if(i===void 0)return 0;const l=e[i],c=n[i];if(!l||!c)return 1/0;const u=(r||s())-c;return l-u},O(this,Q,o=>{const i=n[o],l=e[o];return!!l&&!!i&&(r||s())-i>l})},Bt=new WeakMap,Et=new WeakMap,ie=new WeakMap,Q=new WeakMap,En=function(){const e=new pe(a(this,rt));O(this,it,0),O(this,ct,e),O(this,Gt,n=>{O(this,it,a(this,it)-e[n]),e[n]=0}),O(this,ae,(n,r,s,o)=>{if(m(this,p,z).call(this,r))return 0;if(!At(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(r,n),!At(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s}),O(this,Zt,(n,r,s)=>{if(e[n]=r,a(this,Z)){const o=a(this,Z)-e[n];for(;a(this,it)>o;)m(this,p,ge).call(this,!0)}O(this,it,a(this,it)+e[n]),s&&(s.entrySize=r,s.totalCalculatedSize=a(this,it))})},Gt=new WeakMap,Zt=new WeakMap,ae=new WeakMap,Rt=function*({allowStale:e=this.allowStale}={}){if(a(this,$))for(let n=a(this,H);!(!m(this,p,Ie).call(this,n)||((e||!a(this,Q).call(this,n))&&(yield n),n===a(this,V)));)n=a(this,K)[n]},Ct=function*({allowStale:e=this.allowStale}={}){if(a(this,$))for(let n=a(this,V);!(!m(this,p,Ie).call(this,n)||((e||!a(this,Q).call(this,n))&&(yield n),n===a(this,H)));)n=a(this,q)[n]},Ie=function(e){return e!==void 0&&a(this,j).get(a(this,F)[e])===e},ge=function(e){var o,i;const n=a(this,V),r=a(this,F)[n],s=a(this,R)[n];return a(this,vt)&&m(this,p,z).call(this,s)?s.__abortController.abort(new Error("evicted")):(a(this,ut)||a(this,Y))&&(a(this,ut)&&((o=a(this,st))==null||o.call(this,s,r,"evict")),a(this,Y)&&((i=a(this,X))==null||i.push([s,r,"evict"]))),a(this,Gt).call(this,n),e&&(a(this,F)[n]=void 0,a(this,R)[n]=void 0,a(this,at).push(n)),a(this,$)===1?(O(this,V,O(this,H,0)),a(this,at).length=0):O(this,V,a(this,q)[n]),a(this,j).delete(r),fe(this,$)._--,n},ye=function(e,n,r,s){const o=n===void 0?void 0:a(this,R)[n];if(m(this,p,z).call(this,o))return o;const i=new be,{signal:l}=r;l==null||l.addEventListener("abort",()=>i.abort(l.reason),{signal:i.signal});const c={signal:i.signal,options:r,context:s},u=(w,y=!1)=>{const{aborted:_}=i.signal,L=r.ignoreFetchAbort&&w!==void 0;if(r.status&&(_&&!y?(r.status.fetchAborted=!0,r.status.fetchError=i.signal.reason,L&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),_&&!L&&!y)return f(i.signal.reason);const d=T;return a(this,R)[n]===T&&(w===void 0?d.__staleWhileFetching?a(this,R)[n]=d.__staleWhileFetching:m(this,p,Lt).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,w,c.options))),w},h=w=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=w),f(w)),f=w=>{const{aborted:y}=i.signal,_=y&&r.allowStaleOnFetchAbort,L=_||r.allowStaleOnFetchRejection,d=L||r.noDeleteOnFetchRejection,E=T;if(a(this,R)[n]===T&&(!d||E.__staleWhileFetching===void 0?m(this,p,Lt).call(this,e,"fetch"):_||(a(this,R)[n]=E.__staleWhileFetching)),L)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw w},g=(w,y)=>{var L;const _=(L=a(this,Vt))==null?void 0:L.call(this,e,o,c);_&&_ instanceof Promise&&_.then(d=>w(d===void 0?void 0:d),y),i.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(w(void 0),r.allowStaleOnFetchAbort&&(w=d=>u(d,!0)))})};r.status&&(r.status.fetchDispatched=!0);const T=new Promise(g).then(u,h),b=Object.assign(T,{__abortController:i,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,b,{...c.options,status:void 0}),n=a(this,j).get(e)):a(this,R)[n]=b,b},z=function(e){if(!a(this,vt))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof be},Pe=function(e,n){a(this,K)[n]=e,a(this,q)[e]=n},te=function(e){e!==a(this,H)&&(e===a(this,V)?O(this,V,a(this,q)[e]):m(this,p,Pe).call(this,a(this,K)[e],a(this,q)[e]),m(this,p,Pe).call(this,a(this,H),e),O(this,H,e))},Lt=function(e,n){var s,o,i,l;let r=!1;if(a(this,$)!==0){const c=a(this,j).get(e);if(c!==void 0)if(r=!0,a(this,$)===1)m(this,p,Me).call(this,n);else{a(this,Gt).call(this,c);const u=a(this,R)[c];if(m(this,p,z).call(this,u)?u.__abortController.abort(new Error("deleted")):(a(this,ut)||a(this,Y))&&(a(this,ut)&&((s=a(this,st))==null||s.call(this,u,e,n)),a(this,Y)&&((o=a(this,X))==null||o.push([u,e,n]))),a(this,j).delete(e),a(this,F)[c]=void 0,a(this,R)[c]=void 0,c===a(this,H))O(this,H,a(this,K)[c]);else if(c===a(this,V))O(this,V,a(this,q)[c]);else{const h=a(this,K)[c];a(this,q)[h]=a(this,q)[c];const f=a(this,q)[c];a(this,K)[f]=a(this,K)[c]}fe(this,$)._--,a(this,at).push(c)}}if(a(this,Y)&&((i=a(this,X))!=null&&i.length)){const c=a(this,X);let u;for(;u=c==null?void 0:c.shift();)(l=a(this,ot))==null||l.call(this,...u)}return r},Me=function(e){var n,r,s;for(const o of m(this,p,Ct).call(this,{allowStale:!0})){const i=a(this,R)[o];if(m(this,p,z).call(this,i))i.__abortController.abort(new Error("deleted"));else{const l=a(this,F)[o];a(this,ut)&&((n=a(this,st))==null||n.call(this,i,l,e)),a(this,Y)&&((r=a(this,X))==null||r.push([i,l,e]))}}if(a(this,j).clear(),a(this,R).fill(void 0),a(this,F).fill(void 0),a(this,J)&&a(this,lt)&&(a(this,J).fill(0),a(this,lt).fill(0)),a(this,ct)&&a(this,ct).fill(0),O(this,V,0),O(this,H,0),a(this,at).length=0,O(this,it,0),O(this,$,0),a(this,Y)&&a(this,X)){const o=a(this,X);let i;for(;i=o==null?void 0:o.shift();)(s=a(this,ot))==null||s.call(this,...i)}};let Le=Ge;const ur=1500;let ee=null;const hr=()=>{var e;const t=(e=et())==null?void 0:e.contentWindow;return!ee||!t||!(ee instanceof t.HTMLElement)?null:ee},fr=()=>"userActivation"in window.navigator?window.navigator.userActivation.isActive:!0,Je=(t,e)=>{var n,r;try{const s=new URL(e,t.href);if(s.hostname!==t.hostname||s.protocol!==t.protocol)return(r=(n=U()).openExternal)==null||r.call(n,{href:s.href}),!0}catch{return}},dr=({doc:t})=>{const e=t.contentWindow;if(!e)return;let n;const r=c=>{var g,T,b;if(!c.isTrusted||((T=(g=U()).sendInstrument)==null||T.call(g,{type:"interaction",label:"click"}),!(c instanceof e.MouseEvent)))return;const u=c.target;if(!(u instanceof e.HTMLElement))return;const h=(b=u.closest("a"))==null?void 0:b.getAttribute("href");if(!h)return;const{location:f}=e;Je(f,h)&&c.preventDefault()},s=()=>{var u,h;const c=e.getSelection();!c||c.toString().trim().length===0||(h=(u=U()).sendInstrument)==null||h.call(u,{type:"interaction",label:"copy"})},o=()=>{var c,u;n||(n=e.setTimeout(()=>{n=void 0},ur),(u=(c=U()).sendInstrument)==null||u.call(c,{type:"interaction",label:"scroll"}))},i=c=>{var u,h;ee=c.target,c.key==="Escape"&&((h=(u=U()).notifyEscapeKey)==null||h.call(u))},l=c=>{ee=c.target};e.addEventListener("pointerdown",l,{passive:!0}),e.addEventListener("keydown",i,{passive:!0}),e.addEventListener("click",r,{capture:!0}),e.addEventListener("copy",s,{passive:!0}),e.addEventListener("scroll",o,{passive:!0}),e.document.addEventListener("scroll",o,{capture:!0,passive:!0}),e.open=c=>{if(!c)return null;const{location:u}=e;return Je(u,c),null}};let ze=null;const pr=new Set(["requestDisplayMode","callCompletion","streamCompletion","sendFollowUpMessage","openExternal","requestPrompt"]),gr=t=>{ze=t},U=()=>Fe({includePrivate:!0}),Qe=(t,e,n)=>{var r,s,o;switch(t){case"requestPrompt":{const i=(r=hr())==null?void 0:r.getBoundingClientRect();return(s=e.openPromptInput)==null?void 0:s.call(e,{...n[0],clientX:(i==null?void 0:i.left)??0,clientY:(i==null?void 0:i.top)??0})}default:return(o=e[t])==null?void 0:o.call(e,...n)}},Fe=({includePrivate:t=!1}={})=>{if(!ze)throw new Error("Host API not published");return new Proxy(ze,{get(e,n){if(!(n in e))return console.warn(`Host API property ${String(n)} not found`);const r=n;if(!(!t&&Jn.has(r)))return pr.has(r)?(...s)=>fr()?Qe(r,e,s):console.warn(`Method ${String(r)} called without synchronous user event`):typeof e[r]=="function"?(...s)=>Qe(r,e,s):e[r]}})},tn=new Le({max:100,ttl:60*5e3}),yr=["sediment://","file-service://"],mr="/blank.svg",br=({doc:t})=>{const e=t.contentWindow;if(!e)return;const n=Object.getOwnPropertyDescriptor(e.HTMLImageElement.prototype,"src");n&&Object.defineProperty(e.HTMLImageElement.prototype,"src",{set(r){var s,o,i,l,c;if(typeof r=="string"&&yr.some(u=>r.startsWith(u))){const u=tn.get(r);if(u){(s=n.set)==null||s.call(this,u);return}(o=n.set)==null||o.call(this,mr),(l=(i=U()).getDownloadURL)==null||l.call(i,r).then(h=>{var f;tn.set(r,h),(f=n.set)==null||f.call(this,h)}).catch(()=>{var h;(h=n.set)==null||h.call(this,"")})}else(c=n.set)==null||c.call(this,r)},get:n.get,configurable:!0,enumerable:!0})},wr=({doc:t})=>{const e=t.contentWindow;!e||!("console"in e)||e.addEventListener("pointerdown",n=>{for(const r of n.composedPath())r instanceof e.HTMLElement&&r.dataset.instrument&&U().sendInstrument({type:"count",label:`clicked.${r.dataset.instrument}`})},{passive:!0,capture:!0})},en=t=>{const e=t.trim().match(/(\d+):(\d+)\)?$/),n=parseInt((e==null?void 0:e.at(1))??""),r=parseInt((e==null?void 0:e.at(2))??"");return{lineno:n,colno:r}},nn=(t,e)=>{var s;const n=[],r=t.split(`
`).slice(1)??[];for(let o=0;o<r.length;o++){const i=r[o],l=e(i);if(!l)break;const{source:c,line:u,column:h}=l;if(!(u==null||h==null))if(c!=null&&c.startsWith("internal")){const f=(s=e(r[o+1]))==null?void 0:s.name;f?n.push({line:u,column:h,formatted:`	at ${f} (module:${u}:${h})`}):n.push({line:u,column:h,formatted:i.replace(/(\(blob:.*\))$/,`(module:${u}:${h})`)})}else break}return n},Er=({doc:t,sandboxLogger:e,onMessage:n,transformPosition:r})=>{const s=t.contentWindow;if(!s||!("console"in s))return;const o=c=>{if(!c)return null;const{lineno:u,colno:h}=en(c);return(r==null?void 0:r({line:u,column:h}))??null};s.addEventListener("unhandledrejection",({reason:c})=>{var u,h;if(typeof c=="object"&&"stack"in c){const f=nn(c.stack,o);n({type:pt.ERROR,line:((u=f[0])==null?void 0:u.line)??null,error:{line:((h=f[0])==null?void 0:h.line)??null,message:String(c.message??""),name:c.name??"Error",stack:f.map(({formatted:g})=>g)}})}}),s.addEventListener("error",({lineno:c,colno:u,error:h,message:f})=>{var w;const g=((w=r==null?void 0:r({line:c,column:u}))==null?void 0:w.line)??null;let T="",b=[];h&&typeof h=="object"&&"name"in h&&"stack"in h&&(T=h.name,b=nn(h.stack,o).map(({formatted:y})=>y)),(T||f)&&n({type:pt.ERROR,error:{line:g,message:f,name:T||"Error",stack:b},line:g})},{passive:!0,capture:!0});const i=s.console,l=(c,u)=>(h,...f)=>{var b,w;c(h,...f);let g;if(h&&typeof h=="object"&&"stack"in h&&typeof h.stack=="string"){const y=(b=h.stack)==null?void 0:b.split(`
`);g=(y==null?void 0:y[1])??(y==null?void 0:y[0])}else{const L=(new Error().stack??"").split(`
`);g=L[2]||L[1]}let T=null;if(g){const{lineno:y,colno:_}=en(g);T=((w=r==null?void 0:r({line:y,column:_}))==null?void 0:w.line)??null}try{u({line:T,error:h instanceof Error?h:null,args:h instanceof Error?f:[h,...f]})}catch(y){e.error("Failed to log",y)}};i.error=l(i.error,({line:c,args:u,error:h})=>{n({type:pt.ERROR,line:c,error:h?{line:c,message:h.message,name:h.name,stack:[]}:{line:c,message:String(u[0]??""),name:"Error",stack:[]}}),u.length&&n({type:pt.LOG,level:"info",line:c,log:u})}),i.log=l(i.log,({line:c,args:u})=>{n({type:pt.LOG,level:"info",line:c,log:u})})},Kt=new URLSearchParams(window.location.search);Kt.get("isStorybook");const Qs=Kt.get("sessionId")??"",me=Kt.get("app")??"",_r=Kt.get("deviceType")==="mobile",_n=_r&&me==="skybridge",De=Kt.get("locale")??"";Kt.get("unsafeSkipTargetOriginCheck");const Sn="mobileSkybridge";_n&&document.documentElement.classList.add(Sn);const Sr=({doc:t})=>{t.contentWindow&&t.contentWindow.addEventListener("securitypolicyviolation",e=>{const n={effectiveDirective:e.effectiveDirective,violatedDirective:e.violatedDirective,blockedURI:e.blockedURI,sourceFile:e.sourceFile};U().notifySecurityPolicyViolation(n)})};function Tr(t){let e=!1;const n=[],r=[];function s(c){n.length>0?n.shift()(c):r.push(c)}function o(c){e||s({value:c,done:!1})}function i(){e||(e=!0,n.forEach(c=>c({value:void 0,done:!0})),n.length=0)}function l(c){e||(s(Promise.reject(c)),i())}try{t(o,i,l)}catch(c){l(c)}return{next(){return new Promise(c=>{r.length>0?c(r.shift()):e?c({value:void 0,done:!0}):n.push(c)})},[Symbol.asyncIterator](){return this}}}const Ht=({root:t=et(),additionalGlobals:e,sandboxLogger:n,isInit:r=!1})=>{var s,o,i;if(t!=null&&t.contentWindow){if(r){t.contentWindow.oai=e,t.contentWindow.openai=e,t.contentWindow.webplus=e;return}(s=t.contentWindow).oai??(s.oai={}),(o=t.contentWindow).openai??(o.openai={}),(i=t.contentWindow).webplus??(i.webplus={});for(const[l,c]of Object.entries(e))try{t.contentWindow.oai[l]=c,t.contentWindow.openai[l]=c,t.contentWindow.webplus[l]=c}catch(u){n.environmentError(u)}Or(t.contentWindow,e)}},Or=(t,e)=>{t.dispatchEvent(new tr(e)),t.dispatchEvent(new Qn(e))},Ar=t=>t?t<0?"pop":"push":"update",Tn=({doc:t})=>{const e=t.contentWindow;if(!e)return;const{history:n}=e;let r=[],s=[],o=-1,i=0,l=null;const c=()=>e.location.hash??"",u=S=>{if(!S)return"";try{return new URL(S,e.location.href).hash??""}catch{return""}},h=()=>(i+=1,i),f=()=>{if(r.length===0){r=[h()],s=[c()],o=0;return}s.length===0&&(s=[c()])},g=S=>{var C,I;!r.length||o<0||(I=(C=U()).notifyNavigation)==null||I.call(C,{type:S,canGoBack:o>0,canGoForward:o<r.length-1})},T=(S,C=c())=>{f(),o<r.length-1&&(r=r.slice(0,o+1),s=s.slice(0,o+1)),r=[...r,h()],s=[...s,C],o=r.length-1,l=null,g(S)},b=(S=c())=>{f(),o>=0&&(r[o]=h(),s[o]=S),l=null,g("replace")},w=S=>{if(f(),!r.length)return;const C=typeof S=="number"&&Number.isFinite(S)?Math.trunc(S):0;C!==0&&(o=Math.min(r.length-1,Math.max(0,o+C))),l=null,g(Ar(C))},y=()=>{w(l??-1)},_=S=>{const C=c();if(l!=null){w(l);return}f();const I=u(S==null?void 0:S.oldURL),G=s.lastIndexOf(C);if(G!==-1&&G!==o){w(G-o);return}if(G===o){g("update");return}if(I&&s[o]===I){b(C);return}T("push",C)},L=n.pushState.bind(n);n.pushState=function(...S){const C=L(...S);return T("push"),C};const d=n.replaceState.bind(n);n.replaceState=function(...S){const C=d(...S);return b(),C};const E=n.back.bind(n);n.back=function(...S){return l=-1,E(...S)};const P=n.forward.bind(n);n.forward=function(...S){return l=1,P(...S)};const x=n.go.bind(n);n.go=function(...S){const[C=0]=S,I=typeof C=="number"&&Number.isFinite(C)?Math.trunc(C):Number.parseInt(String(C),10);return l=Number.isFinite(I)?I:null,x(...S)},n.popToRoot=function(){f();const S=-o;if(S===0){l=null;return}return l=S,x(S)},e.addEventListener("popstate",y),e.addEventListener("hashchange",_),f(),g("replace")},Rr={go:t=>{var e,n;(n=(e=et())==null?void 0:e.contentWindow)==null||n.history.go(t)},popToRoot:()=>{var t,e,n,r;(r=(n=(e=(t=et())==null?void 0:t.contentWindow)==null?void 0:e.history).popToRoot)==null||r.call(n)}},Cr=Object.freeze(Object.defineProperty({__proto__:null,navigation:Rr,useNavigation:Tn},Symbol.toStringTag,{value:"Module"})),On=({doc:t=et(),safeArea:e})=>{var c;const n=(c=t==null?void 0:t.contentDocument)==null?void 0:c.documentElement;if(!n)return;const{insets:r}=e,{top:s,bottom:o,left:i,right:l}=r;n.style.setProperty("--safe-area-inset-top",`${s}px`),n.style.setProperty("--safe-area-inset-bottom",`${o}px`),n.style.setProperty("--safe-area-inset-left",`${i}px`),n.style.setProperty("--safe-area-inset-right",`${l}px`)},An=({theme:t,doc:e=et()})=>{var r;const n=(r=e==null?void 0:e.contentDocument)==null?void 0:r.documentElement;n&&(n.dataset.theme=t,n.classList.remove("light","dark"),n.classList.add(t))},Lr="html,body,#root{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}html,body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Helvetica Neue,Arial,sans-serif!important}button,input,textarea,select{font-family:inherit}html{background-color:#fff}@media (prefers-color-scheme: dark){html{background-color:#212121}}@media (prefers-color-scheme: dark){html.mobileSkybridge{background-color:#000}}",vr=t=>{try{const e=t.createElement("style");e.textContent=Lr.trim(),t.head.appendChild(e),_n&&t.documentElement.classList.add(Sn)}catch{}};async function*Rn({sandboxLogger:t,features:e,html:n,theme:r,safeArea:s,transformPosition:o,additionalGlobals:i,expectReadySignal:l}){let c=null,u=null;yield*Tr((h,f)=>{const g=y=>{h(y),y.type===pt.RUN_COMPLETE&&f()};t.time("html.evaluation");const T=et(),b=nr(e),w=()=>{if(!b.contentDocument||!b.contentWindow)return;const y=b.contentDocument;(i||s)&&Ht({root:b,additionalGlobals:Object.assign(i??{},{safeArea:s}),sandboxLogger:t,isInit:!0}),y.open(),dr({doc:b}),Tn({doc:b}),Sr({doc:b}),wr({doc:b}),Er({doc:b,sandboxLogger:t,transformPosition:o,onMessage:g}),br({doc:b});let _=null,L=null;const d=()=>{T==null||T.remove(),t.timeEnd("html.evaluation"),g({type:pt.ENVIRONMENT_STATUS,status:gn.RUNNING_CODE})},E=()=>{c==null||c.disconnect(),u==null||u.disconnect(),g({type:pt.RUN_COMPLETE,duration:null,wasCancelled:!1,wasFatalError:!0})},P=()=>{var I,G;const C=cr(y);C&&C!==L&&((G=(I=U()).notifyIntrinsicHeight)==null||G.call(I,C),L=C)},x=()=>{var I,G;const C=ir(y);C!=null&&C!==_&&((G=(I=U()).notifyBackgroundColor)==null||G.call(I,C),_=C)};y.write(n);const S=y.documentElement;vr(y),u=new ResizeObserver(()=>{P()}),c=new MutationObserver(C=>{for(const I of C)if(I.target===S){if(I.attributeName==="data-ready"&&S.hasAttribute("data-ready")){d();break}else if(I.attributeName==="data-fatal"&&S.hasAttribute("data-fatal")){E();break}}else if(I.addedNodes.length===0&&I.removedNodes.length>0&&I.target.parentElement===y.body&&I.target.childNodes.length===0&&Array.from(y.body.childNodes).every(G=>G===I.target||Ir(G))){E();break}x(),P()}),De&&(S.lang=De),r&&An({theme:r,doc:b}),s&&On({doc:b,safeArea:s}),u.observe(S,{box:"border-box"}),c.observe(S,{childList:!0,attributes:!0,subtree:!0}),y.close(),l||d(),S.hasAttribute("data-ready")&&d()};if(b.addEventListener("load",w,{once:!0}),b.src="about:blank",b.parentElement){const y=new MutationObserver(()=>{b.isConnected||(y==null||y.disconnect(),u==null||u.disconnect(),c==null||c.disconnect(),g({type:pt.RUN_COMPLETE,duration:null,wasCancelled:!1,wasFatalError:!1}))});y.observe(b.parentElement,{childList:!0,attributes:!0,subtree:!0})}})}function Ir(t){var e;return t.nodeType===Node.COMMENT_NODE?!0:t.nodeType===Node.TEXT_NODE?!((e=t.textContent)!=null&&e.trim()):t.nodeType===Node.ELEMENT_NODE?t.childNodes.length===0:!0}const to=Object.freeze(Object.defineProperty({__proto__:null,runHTMLAsync:Rn},Symbol.toStringTag,{value:"Module"})),Cn=({widgetId:t,globals:e,sandboxLogger:n})=>{const{toolInput:r,toolOutput:s,toolResponseMetadata:o,widgetState:i}=e;let l=i;return{toolInput:r,toolOutput:s,toolResponseMetadata:o,widgetState:i,setWidgetState:c=>{var h,f;const u=typeof c=="function"?c(l):c;return l=u,Ht({additionalGlobals:{widgetState:u},sandboxLogger:n}),(f=(h=U())==null?void 0:h.updateWidgetState)==null?void 0:f.call(h,t,u)}}};async function*Pr(t,{html:e,widgetId:n,widgetState:r,viewParams:s,maxHeight:o,toolInput:i,toolOutput:l,toolResponseMetadata:c,displayMode:u,theme:h,userAgent:f,safeArea:g,features:T,csp:b}){try{Kn(b)}catch(y){throw t.error("Failed to apply CSP",y),y}let w;try{w=Fe({includePrivate:!1}),w.displayMode=u,w.maxHeight=o,w.theme=h,w.locale=De,w.userAgent=f,w.view={params:s??null,mode:u},w.widget={state:r,props:l,setState:y=>{var _,L;return console.warn("window.openai.widget is deprecated. It will be removed in future versions"),(L=(_=Fe({includePrivate:!0}))==null?void 0:_.updateWidgetState)==null?void 0:L.call(_,n,y)}},Object.assign(w,Cn({widgetId:n,globals:{toolInput:i,toolOutput:l,toolResponseMetadata:c,widgetState:r},sandboxLogger:t}))}catch{}yield*Rn({sandboxLogger:t,html:e,theme:h,features:T,additionalGlobals:w,safeArea:g,transformPosition:null,expectReadySignal:!1})}function Mr(t,e="<unknown>"){if(t==null)throw new Error(`${e}: unexpected nullish value: ${JSON.stringify(t)}`);return t}var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xe={},ce={},le={};Object.defineProperty(le,"__esModule",{value:!0});le.cast=Fr;le.get=Dr;le.set=xr;const zr=2**32;function Fr(t){return t<0?t+zr:t}function Dr(t,e){return t>>e&255}function xr(t,e,n){return t^(t^n<<e)&255<<e}(function(t){var e=M&&M.__createBinding||(Object.create?function(d,E,P,x){x===void 0&&(x=P);var S=Object.getOwnPropertyDescriptor(E,P);(!S||("get"in S?!E.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return E[P]}}),Object.defineProperty(d,x,S)}:function(d,E,P,x){x===void 0&&(x=P),d[x]=E[P]}),n=M&&M.__setModuleDefault||(Object.create?function(d,E){Object.defineProperty(d,"default",{enumerable:!0,value:E})}:function(d,E){d.default=E}),r=M&&M.__importStar||function(d){if(d&&d.__esModule)return d;var E={};if(d!=null)for(var P in d)P!=="default"&&Object.prototype.hasOwnProperty.call(d,P)&&e(E,d,P);return n(E,d),E};Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_A=t.OFFSET_B=t.OFFSET_G=t.OFFSET_R=void 0,t.newColor=c,t.from=u,t.toNumber=h,t.getRed=f,t.getGreen=g,t.getBlue=T,t.getAlpha=b,t.setRed=w,t.setGreen=y,t.setBlue=_,t.setAlpha=L;const s=r(le),{cast:o,get:i,set:l}=s;t.OFFSET_R=24,t.OFFSET_G=16,t.OFFSET_B=8,t.OFFSET_A=0;function c(d,E,P,x){return(d<<t.OFFSET_R)+(E<<t.OFFSET_G)+(P<<t.OFFSET_B)+(x<<t.OFFSET_A)}function u(d){return c(i(d,t.OFFSET_R),i(d,t.OFFSET_G),i(d,t.OFFSET_B),i(d,t.OFFSET_A))}function h(d){return o(d)}function f(d){return i(d,t.OFFSET_R)}function g(d){return i(d,t.OFFSET_G)}function T(d){return i(d,t.OFFSET_B)}function b(d){return i(d,t.OFFSET_A)}function w(d,E){return l(d,t.OFFSET_R,E)}function y(d,E){return l(d,t.OFFSET_G,E)}function _(d,E){return l(d,t.OFFSET_B,E)}function L(d,E){return l(d,t.OFFSET_A,E)}})(ce);var ue={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.labToXyzd50=Vr;D.xyzd50ToLab=qr;D.oklabToXyzd65=Pn;D.xyzd65ToOklab=Mn;D.lchToLab=zn;D.labToLch=Fn;D.displayP3ToXyzd50=Yr;D.xyzd50ToDisplayP3=Zr;D.proPhotoToXyzd50=Kr;D.xyzd50ToProPhoto=Jr;D.adobeRGBToXyzd50=Qr;D.xyzd50ToAdobeRGB=ts;D.rec2020ToXyzd50=es;D.xyzd50ToRec2020=ns;D.xyzd50ToD65=Dn;D.xyzd65ToD50=xn;D.xyzd65TosRGBLinear=rs;D.xyzd50TosRGBLinear=ss;D.srgbLinearToXyzd50=os;D.srgbToXyzd50=is;D.xyzd50ToSrgb=as;D.oklchToXyzd50=cs;D.xyzd50ToOklch=ls;const Ln=.9642,vn=1,In=.8251;function k(t,e){const n=[0,0,0];for(let r=0;r<3;++r)n[r]=t[r][0]*e[0]+t[r][1]*e[1]+t[r][2]*e[2];return n}class _t{constructor(e,n,r=0,s=0,o=0,i=0,l=0){A(this,"g");A(this,"a");A(this,"b");A(this,"c");A(this,"d");A(this,"e");A(this,"f");this.g=e,this.a=n,this.b=r,this.c=s,this.d=o,this.e=i,this.f=l}eval(e){const n=e<0?-1:1,r=e*n;return r<this.d?n*(this.c*r+this.f):n*(Math.pow(this.a*r+this.b,this.g)+this.e)}}const gt={sRGB:new _t(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new _t(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new _t(1.8,1),proPhotoRGB_INVERSE:new _t(.555556,1,-0,0,0,0,0),k2Dot2:new _t(2.2,1),k2Dot2_INVERSE:new _t(.454545,1),rec2020:new _t(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new _t(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},yt={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]],xyz:[[1,0,0],[0,1,0],[0,0,1]]};function rn(t){return t*(Math.PI/180)}function Nr(t){return t*(180/Math.PI)}function mt(t,e,n,r){return[t.eval(e),t.eval(n),t.eval(r)]}const Br=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],Gr=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],Wr=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],jr=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],Ur=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],$r=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],kr=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],Hr=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],Xr=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function Vr(t,e,n){let r=(t+16)/116,s=r+e/500,o=r-n/200;function i(l){return l<=.20689655172413793?108/841*(l-16/116):l*l*l}return s=i(s)*Ln,r=i(r)*vn,o=i(o)*In,[s,r,o]}function qr(t,e,n){function r(l){return l<=.008856451679035631?841/108*l+16/116:Math.pow(l,1/3)}t=r(t/Ln),e=r(e/vn),n=r(n/In);const s=116*e-16,o=500*(t-e),i=200*(e-n);return[s,o,i]}function Pn(t,e,n){const s=k(Br,[t,e,n]);return s[0]=s[0]*s[0]*s[0],s[1]=s[1]*s[1]*s[1],s[2]=s[2]*s[2]*s[2],k(jr,s)}function Mn(t,e,n){const s=k(Wr,[t,e,n]);s[0]=Math.pow(s[0],1/3),s[1]=Math.pow(s[1],1/3),s[2]=Math.pow(s[2],1/3);const o=k(Gr,s);return[o[0],o[1],o[2]]}function zn(t,e,n){return n===void 0?[t,0,0]:[t,e*Math.cos(rn(n)),e*Math.sin(rn(n))]}function Fn(t,e,n){return[t,Math.sqrt(e*e+n*n),Nr(Math.atan2(n,e))]}function Yr(t,e,n){const[r,s,o]=mt(gt.sRGB,t,e,n),i=[r,s,o];return k(yt.displayP3,i)}function Zr(t,e,n){const r=[t,e,n],s=k(yt.displayP3_INVERSE,r);return mt(gt.sRGB_INVERSE,s[0],s[1],s[2])}function Kr(t,e,n){const[r,s,o]=mt(gt.proPhotoRGB,t,e,n);return k(Ur,[r,s,o])}function Jr(t,e,n){const s=k($r,[t,e,n]);return mt(gt.proPhotoRGB_INVERSE,s[0],s[1],s[2])}function Qr(t,e,n){const[r,s,o]=mt(gt.k2Dot2,t,e,n),i=[r,s,o];return k(yt.adobeRGB,i)}function ts(t,e,n){const r=[t,e,n],s=k(yt.adobeRGB_INVERSE,r);return mt(gt.k2Dot2_INVERSE,s[0],s[1],s[2])}function es(t,e,n){const[r,s,o]=mt(gt.rec2020,t,e,n),i=[r,s,o];return k(yt.rec2020,i)}function ns(t,e,n){const r=[t,e,n],s=k(yt.rec2020_INVERSE,r);return mt(gt.rec2020_INVERSE,s[0],s[1],s[2])}function Dn(t,e,n){return k(Hr,[t,e,n])}function xn(t,e,n){return k(kr,[t,e,n])}function rs(t,e,n){return k(Xr,[t,e,n])}function ss(t,e,n){const r=[t,e,n];return k(yt.sRGB_INVERSE,r)}function os(t,e,n){const r=[t,e,n];return k(yt.sRGB,r)}function is(t,e,n){const[r,s,o]=mt(gt.sRGB,t,e,n),i=[r,s,o];return k(yt.sRGB,i)}function as(t,e,n){const r=[t,e,n],s=k(yt.sRGB_INVERSE,r);return mt(gt.sRGB_INVERSE,s[0],s[1],s[2])}function cs(t,e,n){const[r,s,o]=zn(t,e,n),[i,l,c]=Pn(r,s,o);return xn(i,l,c)}function ls(t,e,n){const[r,s,o]=Dn(t,e,n),[i,l,c]=Mn(r,s,o);return Fn(i,l,c)}var us=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),hs=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fs=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&us(e,t,n);return hs(e,t),e};Object.defineProperty(ue,"__esModule",{value:!0});ue.parse=bs;ue.parseHex=Nn;ue.parseColor=Bn;const ne=ce,N=fs(D),ds=35,we=37,ps=103,he=110,gs=100,ys=101,ms=(()=>{const t="(\\w+)",e="[\\s,\\/]",n="([^\\s,\\/]+)",r=`(?:${e}+${n})`;return new RegExp(`${t}\\(
      ${e}*
      ${n}
      ${r}
      ${r}
      ${r}?
      ${r}?
      ${e}*
    \\)`.replace(/\s/g,""))})();function bs(t){return t.charCodeAt(0)===ds?Nn(t):Bn(t)}function Nn(t){let e=0,n=0,r=0,s=255;switch(t.length){case 4:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(1)),n=(W(t.charCodeAt(2))<<4)+W(t.charCodeAt(2)),r=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(3));break}case 7:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(2)),n=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(4)),r=(W(t.charCodeAt(5))<<4)+W(t.charCodeAt(6));break}case 9:{e=(W(t.charCodeAt(1))<<4)+W(t.charCodeAt(2)),n=(W(t.charCodeAt(3))<<4)+W(t.charCodeAt(4)),r=(W(t.charCodeAt(5))<<4)+W(t.charCodeAt(6)),s=(W(t.charCodeAt(7))<<4)+W(t.charCodeAt(8));break}}return(0,ne.newColor)(e,n,r,s)}function W(t){return(t&15)+9*(t>>6)}function Bn(t){const e=ms.exec(t);if(e===null)throw new Error(`Color.parse(): invalid CSS color: "${t}"`);const n=e[1],r=e[2],s=e[3],o=e[4],i=e[5],l=e[6];switch(n){case"rgb":case"rgba":{const c=_e(r),u=_e(s),h=_e(o),f=i?St(i):255;return(0,ne.newColor)(c,u,h,f)}case"hsl":case"hsla":{const c=Se(r),u=de(s),h=de(o),f=i?St(i):255;let g,T,b;if(u===0)g=T=b=Math.round(h*255);else{const w=h<.5?h*(1+u):h+u-h*u,y=2*h-w;g=Math.round(kt(y,w,c+1/3)*255),T=Math.round(kt(y,w,c)*255),b=Math.round(kt(y,w,c-1/3)*255)}return(0,ne.newColor)(g,T,b,f)}case"hwb":{const c=Se(r),u=de(s),h=de(o),f=i?St(i):255,g=1,T=.5,b=T+g-T*g,w=2*T-b;let y=Math.round(kt(w,b,c+1/3)*255),_=Math.round(kt(w,b,c)*255),L=Math.round(kt(w,b,c-1/3)*255);return y=Te(y,u,h),_=Te(_,u,h),L=Te(L,u,h),(0,ne.newColor)(y,_,L,f)}case"lab":{const c=Tt(r,100),u=Tt(s,125),h=Tt(o,125),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.labToXyzd50(c,u,h)))}case"lch":{const c=Tt(r,100),u=Tt(s,150),h=Se(o)*360,f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.labToXyzd50(...N.lchToLab(c,u,h))))}case"oklab":{const c=Tt(r,1),u=Tt(s,.4),h=Tt(o,.4),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.xyzd65ToD50(...N.oklabToXyzd65(c,u,h))))}case"oklch":{const c=$t(r),u=$t(s),h=$t(o),f=i?St(i):255;return tt(f,N.xyzd50ToSrgb(...N.oklchToXyzd50(c,u,h)))}case"color":{const c=r,u=$t(s),h=$t(o),f=$t(i),g=l?St(l):255;switch(c){case"srgb":return tt(g,[u,h,f]);case"srgb-linear":return tt(g,N.xyzd50ToSrgb(...N.srgbLinearToXyzd50(u,h,f)));case"display-p3":return tt(g,N.xyzd50ToSrgb(...N.displayP3ToXyzd50(u,h,f)));case"a98-rgb":return tt(g,N.xyzd50ToSrgb(...N.adobeRGBToXyzd50(u,h,f)));case"prophoto-rgb":return tt(g,N.xyzd50ToSrgb(...N.proPhotoToXyzd50(u,h,f)));case"rec2020":return tt(g,N.xyzd50ToSrgb(...N.rec2020ToXyzd50(u,h,f)));case"xyz":case"xyz-d65":return tt(g,N.xyzd50ToSrgb(...N.xyzd65ToD50(u,h,f)));case"xyz-d50":return tt(g,N.xyzd50ToSrgb(u,h,f))}}}throw new Error(`Color.parse(): invalid CSS color: "${t}"`)}function _e(t){return t.charCodeAt(t.length-1)===we?Math.round(parseFloat(t)/100*255):Math.round(parseFloat(t))}function St(t){return Math.round(ws(t)*255)}function ws(t){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===we?parseFloat(t)/100:parseFloat(t)}function Se(t){let e=1;switch(t.charCodeAt(t.length-1)){case ys:return 0;case gs:{t.charCodeAt(Math.max(0,t.length-4))===ps?e=400:e=2*Math.PI;break}case he:{e=1;break}default:e=360}return parseFloat(t)/e}function de(t){return t.charCodeAt(0)===he?0:parseFloat(t)/100}function $t(t){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===we?parseFloat(t)/100:parseFloat(t)}function Tt(t,e){return t.charCodeAt(0)===he?0:t.charCodeAt(t.length-1)===we?parseFloat(t)/100*e:parseFloat(t)}function kt(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function Te(t,e,n){let r=t/255;return r*=1-e-n,r+=e,Math.round(r*255)}function Oe(t){return Math.max(0,Math.min(255,t))}function tt(t,e){const n=Oe(Math.round(e[0]*255)),r=Oe(Math.round(e[1]*255)),s=Oe(Math.round(e[2]*255));return(0,ne.newColor)(n,r,s,t)}var nt={},Es=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),_s=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ss=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Es(e,t,n);return _s(e,t),e};Object.defineProperty(nt,"__esModule",{value:!0});nt.format=void 0;nt.formatHEXA=Gn;nt.formatHEX=Os;nt.formatRGBA=As;nt.toRGBA=Rs;nt.formatHSLA=Cs;nt.toHSLA=Ls;nt.formatHWBA=vs;nt.toHWBA=Is;const Ts=Ss(ce),{getRed:It,getGreen:Pt,getBlue:Mt,getAlpha:Wt}=Ts,B=[0,0,0],xt=Array.from({length:256}).map((t,e)=>e.toString(16).padStart(2,"0"));nt.format=Gn;function Gn(t){return"#"+xt[It(t)]+xt[Pt(t)]+xt[Mt(t)]+xt[Wt(t)]}function Os(t){return"#"+xt[It(t)]+xt[Pt(t)]+xt[Mt(t)]}function As(t){return`rgba(${It(t)} ${Pt(t)} ${Mt(t)} / ${Wt(t)/255})`}function Rs(t){return{r:It(t),g:Pt(t),b:Mt(t),a:Wt(t)}}function Cs(t){Wn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],s=Wt(t)/255;return`hsla(${e} ${n}% ${r}% / ${s})`}function Ls(t){Wn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],s=Wt(t)/255;return{h:e,s:n,l:r,a:s}}function vs(t){jn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],s=Wt(t)/255;return`hsla(${e} ${n}% ${r}% / ${s})`}function Is(t){jn(It(t),Pt(t),Mt(t));const e=B[0],n=B[1],r=B[2],s=Wt(t)/255;return{h:e,w:n,b:r,a:s}}function Wn(t,e,n){t/=255,e/=255,n/=255;const r=Math.max(t,e,n),s=r-Math.min(t,e,n),o=s?r===t?(e-n)/s:r===e?2+(n-t)/s:4+(t-e)/s:0;B[0]=60*o<0?60*o+360:60*o,B[1]=100*(s?r<=.5?s/(2*r-s):s/(2-(2*r-s)):0),B[2]=100*(2*r-s)/2}function jn(t,e,n){t/=255,e/=255,n/=255;const r=Math.min(t,e,n),s=Math.max(t,e,n),o=1-s;if(s===r){B[0]=0,B[1]=r,B[2]=o;return}let i=t===r?e-n:e===r?n-t:t-e,l=t===r?3:e===r?5:1;B[0]=(l-i/(s-r))/6,B[1]=r,B[2]=o}var jt={},Ps=M&&M.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Ms=M&&M.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zs=M&&M.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ps(e,t,n);return Ms(e,t),e};Object.defineProperty(jt,"__esModule",{value:!0});jt.alpha=xs;jt.darken=Ns;jt.lighten=Bs;jt.blend=Gs;jt.getLuminance=Ws;const Fs=zs(ce),{getRed:re,getGreen:se,getBlue:oe,getAlpha:Un,setAlpha:Ds,newColor:Ne}=Fs;function xs(t,e){return Ds(t,Math.round(e*255))}function Ns(t,e){const n=re(t),r=se(t),s=oe(t),o=Un(t),i=1-e;return Ne(n*i,r*i,s*i,o)}function Bs(t,e){const n=re(t),r=se(t),s=oe(t),o=Un(t);return Ne(n+(255-n)*e,r+(255-r)*e,s+(255-s)*e,o)}function Gs(t,e,n,r=1){const s=(c,u)=>Math.round((c**(1/r)*(1-n)+u**(1/r)*n)**r),o=s(re(t),re(e)),i=s(se(t),se(e)),l=s(oe(t),oe(e));return Ne(o,i,l,255)}function Ws(t){const e=re(t)/255,n=se(t)/255,r=oe(t)/255,s=c=>c<=.03928?c/12.92:((c+.055)/1.055)**2.4,o=s(e),i=s(n),l=s(r);return Math.round((.2126*o+.7152*i+.0722*l)*1e3)/1e3}(function(t){var e=M&&M.__createBinding||(Object.create?function(r,s,o,i){i===void 0&&(i=o);var l=Object.getOwnPropertyDescriptor(s,o);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(r,i,l)}:function(r,s,o,i){i===void 0&&(i=o),r[i]=s[o]}),n=M&&M.__exportStar||function(r,s){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&e(s,r,o)};Object.defineProperty(t,"__esModule",{value:!0}),n(ce,t),n(ue,t),n(nt,t),n(jt,t)})(xe);function Ot(t,e=document.documentElement){var s;if((s=window.CSS)!=null&&s.number)return CSSNumericValue.parse(t).to("px").value;const n=document.createElement("div");n.style.all="initial",n.style.position="absolute",n.style.width=t,e.appendChild(n);const r=n.getBoundingClientRect().width;return e.removeChild(n),r}const wt=4,js=8;function sn(t){const{borderWidth:e,borderRadius:n,backgroundColor:r,paddingLeft:s,paddingRight:o,paddingTop:i,paddingBottom:l}=getComputedStyle(t),c=t.getBoundingClientRect(),u=xe.getAlpha(xe.parse(r))===0,h=Ot(e)>0,f=Ot(n),g=f?f+wt:js;return u&&!h?{x:c.x+Ot(s)-wt,y:c.y+Ot(i)-wt,width:c.width-Ot(s)-Ot(o)+wt*2,height:c.height-Ot(i)-Ot(l)+wt*2,borderRadius:g}:{x:c.x-wt,y:c.y-wt,width:c.width+wt*2,height:c.height+wt*2,borderRadius:g}}const Us=t=>{var n,r,s;const e=(s=(r=(n=et())==null?void 0:n.contentDocument)==null?void 0:r.defaultView)==null?void 0:s.HTMLElement;return t instanceof HTMLElement||!!e&&t instanceof e},$s=t=>{const{sourceName:e,sourcePos:n}=t.dataset;if(!e||!n)return null;const[r,s]=n.split("-"),[o,i]=r.split(":"),[l,c]=s.split(":");return{id:`${e}:${o}:${i}`,name:e,element:t,location:{start:{line:Number(o),col:Number(i)},end:{line:Number(l),col:Number(c)}}}};function on(t){const e=t.composedPath();for(const n of e){if(!Us(n))continue;const r=$s(n);if(r)return r}return null}class ks{constructor(){A(this,"window");A(this,"selectedComponent",null);A(this,"hoveredComponent",null);A(this,"frame",null);A(this,"getBoundingBoxes",()=>{let e=null,n=[];if(this.hoveredComponent){const{element:r}=this.hoveredComponent;e={component:{id:this.hoveredComponent.id,name:this.hoveredComponent.name,location:this.hoveredComponent.location},rect:sn(r)}}if(this.selectedComponent){const{element:r}=this.selectedComponent;n=[{component:{id:this.selectedComponent.id,name:this.selectedComponent.name,location:this.selectedComponent.location},rect:sn(r)}]}return{hovered:e,selected:n}});A(this,"measure",()=>{this.frame=requestAnimationFrame(()=>{var e,n;(n=(e=U()).drawBoundingBoxes)==null||n.call(e,this.getBoundingBoxes())})});A(this,"handleMouseOver",e=>{const n=on(e);this.hoveredComponent=n,this.measure()});A(this,"handlePointerDown",e=>{e.preventDefault(),e.stopPropagation()});A(this,"handleClick",e=>{e.stopPropagation(),e.preventDefault();const n=on(e);this.selectedComponent=n,this.measure()});A(this,"destroy",()=>{this.removeMouseListeners(),this.window.removeEventListener("scroll",this.measure,{capture:!0}),this.window.removeEventListener("resize",this.measure,{capture:!0}),this.frame!=null&&cancelAnimationFrame(this.frame)});A(this,"enable",()=>{this.removeMouseListeners(),this.window.addEventListener("mouseover",this.handleMouseOver,{passive:!0,capture:!0}),this.window.addEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.addEventListener("click",this.handleClick,{capture:!0})});A(this,"disable",()=>{this.removeMouseListeners()});A(this,"removeMouseListeners",()=>{this.window.removeEventListener("mouseover",this.handleMouseOver,{capture:!0}),this.window.removeEventListener("pointerdown",this.handlePointerDown,{capture:!0}),this.window.removeEventListener("click",this.handleClick,{capture:!0})});var e;this.window=Mr((e=et())==null?void 0:e.contentWindow),this.window.addEventListener("scroll",this.measure,{capture:!0}),this.window.addEventListener("resize",this.measure,{capture:!0})}}const Hs=(t,...e)=>{};class ht{constructor(){A(this,"pendingTimers",new Map)}log(e,...n){Hs(e,...n)}error(e,n){console.error("[sandbox]",e,n),U().sendInstrument({type:"error",message:e,error:n})}environmentError(e){if(console.error("[sandbox]",e),e instanceof Error){const{name:r,message:s,stack:o}=e;U().notifyEnvironmentError({name:r,message:s,stack:o});return}const{stack:n}=new Error;try{U().notifyEnvironmentError({name:"Unknown environment error",message:JSON.stringify(e),stack:n})}catch{U().notifyEnvironmentError({name:"Unknown environment error",message:"Failed to stringify error",stack:n})}}count(e,n,r){U().sendInstrument({type:"count",label:e,tags:r,count:n})}time(e){this.pendingTimers.has(e),this.pendingTimers.set(e,performance.now())}timeEnd(e){if(!this.pendingTimers.has(e))return;const n=performance.now(),r=n-(this.pendingTimers.get(e)??n);this.pendingTimers.delete(e),U().sendInstrument({type:"hist",label:e,value:r})}}function Xs(t){const n=Be(t,new WeakMap);try{return structuredClone(n)}catch{}return n}function Be(t,e){if(t===null||typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="bigint")return t;if(typeof t=="symbol"||typeof t=="function"||typeof t>"u")return String(t);if(e.has(t))return e.get(t);try{return structuredClone(t)}catch{}const n=Object.prototype.toString.call(t);if(n==="[object Date]")return new Date(t.getTime());if(n==="[object RegExp]")return Vs(t);if(n==="[object ArrayBuffer]")return t.slice(0);if(n==="[object DataView]"){const s=t,o=Be(s.buffer,e);try{return new DataView(o,s.byteOffset,s.byteLength)}catch{return String(t)}}if(ArrayBuffer.isView(t)&&!(t instanceof DataView))try{const s=t.constructor;if(typeof t.slice=="function")return t.slice();const o=new s(t.length);return o.set(t),o}catch{return String(t)}if(n==="[object Map]"){const s=new Map;e.set(t,s);for(const[o,i]of t)s.set(Ft(o,e),Ft(i,e));return s}if(n==="[object Set]"){const s=new Set;e.set(t,s);for(const o of t)s.add(Ft(o,e));return s}if(typeof Blob<"u"&&t instanceof Blob)try{return typeof File<"u"&&t instanceof File?new File([t],t.name,{type:t.type,lastModified:t.lastModified}):new Blob([t],{type:t.type})}catch{return String(t)}if(typeof URL<"u"&&t instanceof URL)try{return new URL(t.toString())}catch{return String(t)}if(typeof URLSearchParams<"u"&&t instanceof URLSearchParams)try{return new URLSearchParams(t.toString())}catch{return String(t)}if(t instanceof Error){const s=t;let o;try{const i=s.constructor;o=typeof i=="function"?new i(s.message):new Error(s.message)}catch{o=new Error(s.message)}if(o.name=s.name,typeof s.stack=="string"&&(o.stack=s.stack),"cause"in s)try{o.cause=Ft(s.cause,e)}catch{o.cause=String(s.cause)}for(const i of Object.keys(s))try{o[i]=Ft(s[i],e)}catch{o[i]=String(s[i])}return o}if(typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer||typeof WeakMap<"u"&&t instanceof WeakMap||typeof WeakSet<"u"&&t instanceof WeakSet)return String(t);if(Array.isArray(t)){const s=new Array(t.length);e.set(t,s);for(let o=0;o<t.length;o++)o in t&&(s[o]=Ft(t[o],e));return s}const r={};e.set(t,r);for(const s of Object.keys(t)){let o;try{o=t[s]}catch(i){o=String(i)}r[s]=Ft(o,e)}return r}function Ft(t,e){try{return structuredClone(t)}catch{}return Be(t,e)}function Vs(t){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}const an="ABORT",cn="CALL",ln="REJECT",Ae="RESOLVE";function dt(t,e){const n=o=>{const i=o.data;if(Array.isArray(i)&&i[0]===cn){o.stopImmediatePropagation();const[l]=o.ports;if(!l)throw new Error("RPCCallMessage must contains a port.");e?async function(){const c=new AbortController;try{l.onmessage=({data:u})=>Array.isArray(u)&&u[0]===an&&c.abort(),l.postMessage([Ae,await e.call({signal:c.signal},...i.slice(1))])}catch(u){if(u instanceof Error&&u.name==="DataCloneError")try{l.postMessage([Ae,await e.call({signal:c.signal},...Xs(i.slice(1)))]);return}catch{}l.postMessage([ln,u])}finally{l.close()}}():(l.postMessage([ln,new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.")]),l.close())}};t.addEventListener("message",n),t.start();const r=o=>(...i)=>new Promise((l,c)=>{var f;const{port1:u,port2:h}=new MessageChannel;u.onmessage=g=>{const T=g.data;T[0]===Ae?l(T[1]):c(T[1]),u.close()},(f=o==null?void 0:o.signal)==null||f.addEventListener("abort",()=>{u.postMessage([an]),u.close(),c(new Error("Aborted."))}),t.postMessage([cn,...i],[h,...o.transfer||[]])}),s=r({});return s.withOptions=r,s}const un="GENERATOR_GENERATE";function hn(t,e){const n=o=>{const i=o.data;if(Array.isArray(i)&&i[0]===un){if(o.stopImmediatePropagation(),!e)throw new Error("No function was registered on this RPC. This is probably calling a client which do not implement the function.");const[l,c,...u]=i,h=e(...u);dt(c.next,h.next.bind(h)),dt(c.return,f=>{var g;return((g=h.return)==null?void 0:g.call(h,f))||{done:!0}}),dt(c.throw,f=>{var g;return((g=h.throw)==null?void 0:g.call(h,f))||Promise.reject(f)}),dt(c.asyncDispose,async()=>{var T,b;const f=Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose"),g=Symbol.dispose||Symbol.for("Symbol.dispose");f in h?await((T=h[f])==null?void 0:T.call(h)):g in h&&((b=h[g])==null||b.call(h))})}};t.addEventListener("message",n),t.start();const r=o=>{let i;return(...l)=>{var G;const{port1:c,port2:u}=new MessageChannel,{port1:h,port2:f}=new MessageChannel,{port1:g,port2:T}=new MessageChannel,{port1:b,port2:w}=new MessageChannel,y={signal:o.signal},_=()=>{c.close(),u.close(),h.close(),f.close(),g.close(),T.close(),b.close(),w.close()},L=dt(c).withOptions(y),d=dt(h).withOptions(y),E=dt(g).withOptions(y),P=dt(b).withOptions(y);let x=!1;const S=async bt=>{if(i==null||i(),x)return{done:!0};const We=await bt();return We.done&&(x=!0,_()),We},C=async bt=>{i==null||i(),await bt(),x=!0,_(),i=()=>{throw new Error("This generator has been disposed.")}},I={next:bt=>S(()=>d(bt)),return:bt=>S(()=>E(bt)),throw:bt=>S(()=>P(bt)),[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")]:()=>C(()=>L()),[Symbol.asyncIterator]:()=>I};return t.postMessage([un,{asyncDispose:u,next:f,return:T,throw:w},...l],[...o.transfer||[],u,f,T,w]),(G=o.signal)==null||G.addEventListener("abort",()=>{i=()=>{throw new Error("This generator has been aborted.")},_()},{once:!0}),I}},s=r({});return s.withOptions=r,s}const qs=()=>me==="chatgpt"?"https://chatgpt.com":me==="feather"?"https://feather.openai.com":me==="skybridge"?"https://skybridge.oaistatic.com":"*",Ys=async(t,e=[])=>{if("serviceWorker"in navigator){const i=await navigator.serviceWorker.getRegistration();if(i)return await i.unregister(),window.location.reload(),null}const n=Object.fromEntries(Object.entries(t).map(([i,l])=>{var h;const{port1:c,port2:u}=new MessageChannel;return l&&(((h=l==null?void 0:l.constructor)==null?void 0:h.name)==="AsyncGeneratorFunction"?hn(c,l):dt(c,l)),[i,u]})),r=new MessageChannel;window.parent.postMessage({type:"init",ports:n,replyPort:r.port2},qs(),[...Object.values(n),r.port2]);const s=await new Promise(i=>{r.port1.onmessage=l=>i(l.data),r.port1.start()}),o=new Set(e);return Object.fromEntries(Object.entries(s).map(([i,l])=>[i,o.has(i)?hn(l):dt(l)]))};let ft=null;Ys({async*runUserCode(t){const e=new ht;try{const{runUserCode:n}=await zt(async()=>{const{runUserCode:r}=await import("./run-user-code-CVx0apll.js");return{runUserCode:r}},[]);yield*n(e,t)}catch(n){e.environmentError(n)}},async buildUserCode(t){const e=new ht;try{const{buildUserCode:n}=await zt(async()=>{const{buildUserCode:r}=await import("./build-user-code-DoR-Q9-A.js");return{buildUserCode:r}},__vite__mapDeps([0,1]));return await n(e,t)}catch(n){e.environmentError(n)}return null},async prepareEnvironment(t){const e=new ht;try{const{prepareEnvironment:n}=await zt(async()=>{const{prepareEnvironment:r}=await import("./prepare-environment-D33UJFtE.js");return{prepareEnvironment:r}},[]);await n(e,t)}catch(n){e.environmentError(n)}},async*runWidgetCode(t){const e=new ht;try{yield*Pr(e,t)}catch(n){e.environmentError(n)}},async validate(t,e){const n=new ht;try{const{validateReact:r}=await zt(async()=>{const{validateReact:s}=await import("./validate-react-BDoP0unB.js");return{validateReact:s}},__vite__mapDeps([2,1,3]));return await r(n,t,e),!0}catch(r){const{parseAndLogTranspileError:s}=await zt(async()=>{const{parseAndLogTranspileError:o}=await import("./parse-transpile-error-BhWCFXvx.js");return{parseAndLogTranspileError:o}},__vite__mapDeps([4,3]));return s(n,r)??!1}},stop(){ft==null||ft.destroy(),ft=null,er()},setEditMode:t=>{const e=new ht;try{ft??(ft=new ks)}catch(n){e.environmentError(n);return}t?ft.enable():(ft==null||ft.destroy(),ft=null)},async screenshot(){var i;const t=et();if(!t)return null;const e=(i=t.contentDocument)==null?void 0:i.documentElement;if(!e)return null;const n=e.scrollLeft||0,r=e.scrollTop||0,{domToDataUrl:s}=await zt(async()=>{const{domToDataUrl:l}=await import("./index-CSSI_kxh.js");return{domToDataUrl:l}},[]);return{imageBase64:await s(e,{backgroundColor:"transparent"}),scrollX:n,scrollY:r}},async setAdditionalGlobals({additionalGlobals:t}){const e=new ht;try{Ht({additionalGlobals:t,sandboxLogger:e})}catch(n){e.environmentError(n)}},async setWidgetProps({widgetId:t,widgetState:e,toolInput:n,toolOutput:r,toolResponseMetadata:s}){const o=new ht;try{Ht({additionalGlobals:{widget:{state:e,props:r,setState:i=>{var l,c;return(c=(l=U())==null?void 0:l.updateWidgetState)==null?void 0:c.call(l,t,i)}},...Cn({widgetId:t,globals:{toolInput:n,toolOutput:r,toolResponseMetadata:s,widgetState:e},sandboxLogger:o})},sandboxLogger:o})}catch(i){o.environmentError(i)}},async setTheme({theme:t}){const e=new ht;try{An({theme:t}),Ht({additionalGlobals:{theme:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async setSafeArea({safeArea:t}){const e=new ht;try{On({safeArea:t}),Ht({additionalGlobals:{safeArea:t},sandboxLogger:e})}catch(n){e.environmentError(n)}},async navigate(t){const{navigation:e}=await zt(async()=>{const{navigation:n}=await Promise.resolve().then(()=>Cr);return{navigation:n}},void 0);if("delta"in t){e.go(t.delta);return}if("popToRoot"in t){e.popToRoot();return}},getCurrentPath(){var t,e;return((e=(t=et())==null?void 0:t.contentWindow)==null?void 0:e.location.pathname)??null}},["streamCompletion"]).then(t=>{t&&gr(t)});export{gn as E,Le as L,pt as M,Qs as S,zt as _,Kn as a,M as b,Tr as c,U as d,eo as e,to as f,Fe as g,Rn as r};
